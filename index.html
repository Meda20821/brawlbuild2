<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brawl Stars Team Builder</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Brawl Stars Team Builder</h1>
    
    <label for="modalita">Seleziona la modalità:</label>
    <select id="modalita" onchange="caricaMappe()">
        <option value="">-- Seleziona una modalità --</option>
        <option value="KO">KO</option>
        <option value="Rapina">Rapina</option>
        <option value="Arraffagemme">Arraffagemme</option>
        <option value="Footbrawl">Footbrawl</option>
        <option value="Hockeybrawl">Hockeybrawl</option>
    </select>

    <label for="mappa">Seleziona la mappa:</label>
    <select id="mappa">
        <option value="">-- Seleziona una mappa --</option>
    </select>

    <h2>Squadra 1</h2>
    <div class="brawler-container">
        <label for="brawler1">Brawler 1:</label>
        <select id="brawler1" class="brawler-select" onchange="aggiornaInfo(1)"></select>
        <img id="brawler1-img" class="brawler-img" src="" alt="">
        <p id="categoria1" class="categoria"></p>
    </div>

    <div class="brawler-container">
        <label for="brawler2">Brawler 2:</label>
        <select id="brawler2" class="brawler-select" onchange="aggiornaInfo(2)"></select>
        <img id="brawler2-img" class="brawler-img" src="" alt="">
        <p id="categoria2" class="categoria"></p>
    </div>

    <div class="brawler-container">
        <label for="brawler3">Brawler 3:</label>
        <select id="brawler3" class="brawler-select" onchange="aggiornaInfo(3)"></select>
        <img id="brawler3-img" class="brawler-img" src="" alt="">
        <p id="categoria3" class="categoria"></p>
    </div>

    <h2>Squadra 2 (Counter suggeriti)</h2>
    <p id="counter1" class="counter">Counter 1: -</p>
    <p id="counter2" class="counter">Counter 2: -</p>
    <p id="counter3" class="counter">Counter 3: -</p>

    <script>
        const brawlers = [
            "8-Bit", "Amber", "Angelo", "Ash", "Barley", "Bea", "Belle", "Berry", "Bibi", "Bo", "Bonnie", "Brock", "Bull", "Buster", "Buzz",
            "Byron", "Carl", "Charlie", "Chester", "Chuck", "Clancy", "Colette", "Colt", "Cordelius", "Crow", "Darryl", "Doug", "Draco", "Dynamike",
            "Edgar", "El Primo", "Emz", "Eve", "Fang", "Finx", "Frank", "Gale", "Gene", "Gray", "Griff", "Grom", "Gus", "Hank", "Jacky", "Janet",
            "Jessie", "Juju", "Kenji", "Kit", "Larry & Lawrie", "Leon", "Lily", "Lola", "Lou", "Lumi", "Maisie", "Mandy", "Max", "Meeple", "Meg",
            "Melodie", "Mico", "Moe", "Mortis", "Mr. P", "Nani", "Nita", "Ollie", "Otis", "Pam", "Pearl", "Penny", "Piper", "Poco", "R-T", "Rico",
            "Rosa", "Ruffs", "Sam", "Sandy", "Shade", "Shelly", "Spike", "Sprout", "Squeak", "Stu", "Surge", "Tara", "Tick", "Willow"
        ];

        const categorie = {
            "8-Bit": "Tiratore",
            "Amber": "Assassino",
            "Angelo": "Supporto",
            "Ash": "Tank",
            "Barley": "Lanciatore",
            "Bea": "Tiratore",
            "Belle": "Tiratore",
            "Berry": "Tank",
            "Bibi": "Tank",
            "Bo": "Tiratore",
            "Bonnie": "Ibrido",
            "Brock": "Tiratore",
            "Bull": "Tank",
            "Buster": "Tank",
            "Buzz": "Assassino"
        };

        function popolaSelect() {
            document.querySelectorAll(".brawler-select").forEach(select => {
                select.innerHTML = "<option value=''>-- Seleziona un Brawler --</option>";
                brawlers.forEach(brawler => {
                    let option = document.createElement("option");
                    option.value = brawler;
                    option.textContent = brawler;
                    select.appendChild(option);
                });
            });
        }

        function aggiornaInfo(num) {
            let brawlerSelezionato = document.getElementById(`brawler${num}`).value;
            let img = document.getElementById(`brawler${num}-img`);
            let categoria = document.getElementById(`categoria${num}`);
            let counterText = document.getElementById(`counter${num}`);

            if (brawlerSelezionato) {
                img.src = `https://static.wikia.nocookie.net/brawlstars/images/${brawlerSelezionato.replace(" ", "_")}.png`;
                img.alt = brawlerSelezionato;
                categoria.textContent = `Categoria: ${categorie[brawlerSelezionato] || "Sconosciuta"}`;

                let counterSuggeriti = counter[brawlerSelezionato] || ["-"];
                counterText.innerHTML = `Counter ${num}: ${counterSuggeriti.map(c => `<span class="counter-name">${c}</span>`).join(", ")}`;

                evidenziaCounter();
            } else {
                img.src = "";
                categoria.textContent = "";
                counterText.textContent = `Counter ${num}: -`;
            }
        }

        function evidenziaCounter() {
            document.querySelectorAll(".counter-name").forEach(el => {
                let brawler = el.textContent;
                el.style.color = counter[brawler] ? "red" : "orange";
            });
        }

        function caricaMappe() {
            let modalita = document.getElementById("modalita").value;
            let mappaSelect = document.getElementById("mappa");
            mappaSelect.innerHTML = "<option value=''>-- Seleziona una mappa --</option>";
            if (mappe[modalita]) {
                mappe[modalita].forEach(mappa => {
                    let option = document.createElement("option");
                    option.value = mappa;
                    option.textContent = mappa;
                    mappaSelect.appendChild(option);
                });
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            popolaSelect();
        });
    </script>
</body>
</html>
